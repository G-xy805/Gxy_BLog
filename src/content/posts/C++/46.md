---
title: 46.C++ä¸­çš„mapå’Œunordered_mapçš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯
order: 46
description: è¯¦è§£C++ STLä¸­mapå’Œunordered_mapçš„åº•å±‚å®ç°ã€æ€§èƒ½å·®å¼‚åŠé€‚ç”¨åœºæ™¯
published: '2026-01-23'
image: /assets/images/cpp-logo.webp
tags:
- C++
- STL
- å®¹å™¨
- å“ˆå¸Œè¡¨
- çº¢é»‘æ ‘
category: C++
---
# ğŸ”¬ C++ä¸­çš„mapå’Œunordered_mapçš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯
## ğŸ“– å†…å®¹æ¦‚è§ˆ

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

## ğŸ”„ åŠŸèƒ½è¯¦è§£

## âš ï¸ âš ï¸ âš ï¸ âš ï¸ âš ï¸ âš ï¸ æ³¨æ„äº‹é¡¹

## ğŸ’¡ å…³é”®è¦ç‚¹

## ğŸ“‹ æ€»ç»“


ğŸ“– **å†…å®¹æ¦‚è§ˆ**

æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»C++ STLä¸­`map`å’Œ`unordered_map`ä¸¤ç§å…³è”å®¹å™¨çš„åŒºåˆ«ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„åº•å±‚å®ç°ã€æ€§èƒ½ç‰¹ç‚¹ã€é€‚ç”¨åœºæ™¯ä»¥åŠä½¿ç”¨æ–¹æ³•ã€‚é€šè¿‡å¯¹æ¯”åˆ†æï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å®é™…é¡¹ç›®ä¸­é€‰æ‹©åˆé€‚çš„å®¹å™¨ã€‚

ğŸ“š **å¤´æ–‡ä»¶ä¸å‘½åç©ºé—´**

| å®¹å™¨ç±»å‹ | æ‰€éœ€å¤´æ–‡ä»¶ | å‘½åç©ºé—´ |
|---------|-----------|---------|
| `map` | `#include <map>` | `std::map` |
| `unordered_map` | `#include <unordered_map>` | `std::unordered_map` |

ğŸ¯ **åº•å±‚å®ç°åŸç†**

### 2.1 mapçš„å®ç°

`map`å†…éƒ¨å®ç°äº†ä¸€ä¸ª**çº¢é»‘æ ‘**ï¼ˆRed-Black Treeï¼‰ï¼Œè¿™æ˜¯ä¸€ç§éä¸¥æ ¼å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- è‡ªåŠ¨æ’åºç‰¹æ€§ï¼šå…ƒç´ æŒ‰ç…§é”®çš„å¤§å°é¡ºåºå­˜å‚¨
- æ¯ä¸ªèŠ‚ç‚¹åŒ…å«é”®å€¼å¯¹ã€çˆ¶èŠ‚ç‚¹æŒ‡é’ˆã€å·¦å³å­èŠ‚ç‚¹æŒ‡é’ˆä»¥åŠé¢œè‰²æ ‡è®°
- åŸºæœ¬æ“ä½œï¼ˆæ’å…¥ã€æŸ¥æ‰¾ã€åˆ é™¤ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸º**O(log n)**
- ä½¿ç”¨ä¸­åºéå†å¯ä»¥æŒ‰é”®å€¼ä»å°åˆ°å¤§è®¿é—®æ‰€æœ‰å…ƒç´ 

### 2.2 unordered_mapçš„å®ç°

`unordered_map`å†…éƒ¨å®ç°äº†ä¸€ä¸ª**å“ˆå¸Œè¡¨**ï¼ˆHash Tableï¼‰ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°æ¡¶ï¼ˆBucketï¼‰ä¸­ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- æ— åºå­˜å‚¨ï¼šå…ƒç´ çš„å­˜å‚¨é¡ºåºä¸æ’å…¥é¡ºåºæ— å…³
- ç”±å“ˆå¸Œè¡¨å’Œé“¾è¡¨/çº¢é»‘æ ‘ï¼ˆè§£å†³å†²çªï¼‰ç»„æˆ
- å¹³å‡æƒ…å†µä¸‹åŸºæœ¬æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º**O(1)**
- æœ€åæƒ…å†µä¸‹ï¼ˆå“ˆå¸Œå†²çªä¸¥é‡ï¼‰æ—¶é—´å¤æ‚åº¦ä¸º**O(n)**

ğŸ” **æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”**

| ç‰¹æ€§ | map | unordered_map |
|------|-----|---------------|
| **å†…éƒ¨ç»“æ„** | çº¢é»‘æ ‘ | å“ˆå¸Œè¡¨ |
| **å…ƒç´ é¡ºåº** | æœ‰åºï¼ˆæŒ‰é”®æ’åºï¼‰ | æ— åº |
| **æŸ¥æ‰¾é€Ÿåº¦** | O(log n) | å¹³å‡O(1)ï¼Œæœ€åO(n) |
| **æ’å…¥é€Ÿåº¦** | O(log n) | å¹³å‡O(1)ï¼Œæœ€åO(n) |
| **åˆ é™¤é€Ÿåº¦** | O(log n) | å¹³å‡O(1)ï¼Œæœ€åO(n) |
| **å†…å­˜å ç”¨** | è¾ƒä½ï¼ˆæ¯ä¸ªèŠ‚ç‚¹ä»…éœ€å°‘é‡é¢å¤–ç©ºé—´ï¼‰ | è¾ƒé«˜ï¼ˆéœ€è¦å“ˆå¸Œè¡¨å’Œå†²çªè§£å†³ç»“æ„ï¼‰ |
| **è¿­ä»£å™¨ç¨³å®šæ€§** | æ’å…¥/åˆ é™¤æ“ä½œä¸ä¼šä½¿è¿­ä»£å™¨å¤±æ•ˆï¼ˆé™¤äº†è¢«åˆ é™¤çš„å…ƒç´ ï¼‰ | æ’å…¥å¯èƒ½å¯¼è‡´rehashï¼Œä½¿æ‰€æœ‰è¿­ä»£å™¨å¤±æ•ˆ |
| **é”®ç±»å‹è¦æ±‚** | å¿…é¡»æ”¯æŒ`<`è¿ç®—ç¬¦ | å¿…é¡»æ”¯æŒå“ˆå¸Œå‡½æ•°å’Œ`==`è¿ç®—ç¬¦ |

âš–ï¸ **ä¼˜ç¼ºç‚¹åˆ†æ**

### 4.1 mapçš„ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- å…ƒç´ è‡ªåŠ¨æ’åºï¼Œä¾¿äºèŒƒå›´æŸ¥æ‰¾å’Œéå†
- æ’å…¥å’Œåˆ é™¤æ“ä½œç¨³å®šï¼Œè¿­ä»£å™¨ä¸æ˜“å¤±æ•ˆ
- å†…å­˜ä½¿ç”¨ç›¸å¯¹é«˜æ•ˆ
- é€‚ç”¨äºéœ€è¦é¢‘ç¹è¿›è¡ŒèŒƒå›´æŸ¥è¯¢çš„åœºæ™¯

**ç¼ºç‚¹ï¼š**
- æŸ¥æ‰¾å’Œä¿®æ”¹æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œä¸å¦‚unordered_mapé«˜æ•ˆ
- ä¸é€‚åˆéœ€è¦å¿«é€Ÿéšæœºè®¿é—®çš„åœºæ™¯

### 4.2 unordered_mapçš„ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- å¹³å‡æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œæ•ˆç‡æé«˜
- é€‚åˆéœ€è¦é¢‘ç¹è¿›è¡ŒæŸ¥æ‰¾æ“ä½œçš„åœºæ™¯

**ç¼ºç‚¹ï¼š**
- å…ƒç´ æ— åºï¼Œæ— æ³•ç›´æ¥è¿›è¡ŒèŒƒå›´æŸ¥è¯¢
- å“ˆå¸Œè¡¨å»ºç«‹å’Œrehashè¿‡ç¨‹è€—æ—¶
- å†…å­˜å ç”¨è¾ƒé«˜
- è¿­ä»£å™¨åœ¨rehashæ—¶ä¼šå¤±æ•ˆ

ğŸ› ï¸ **é€‚ç”¨åœºæ™¯**

### 5.1 é€‚åˆä½¿ç”¨mapçš„åœºæ™¯

1. **éœ€è¦æœ‰åºæ•°æ®**ï¼šå½“éœ€è¦å…ƒç´ ä¿æŒç‰¹å®šé¡ºåºæ—¶
2. **èŒƒå›´æŸ¥è¯¢é¢‘ç¹**ï¼šéœ€è¦ç»å¸¸ä½¿ç”¨`lower_bound()`ã€`upper_bound()`ç­‰èŒƒå›´æŸ¥è¯¢å‡½æ•°
3. **å†…å­˜æ•æ„Ÿåœºæ™¯**ï¼šå½“å¯ç”¨å†…å­˜æœ‰é™æ—¶
4. **æ’å…¥åˆ é™¤é¢‘ç¹ä¸”éœ€è¦è¿­ä»£å™¨ç¨³å®š**ï¼šå½“éœ€è¦ä¿æŒè¿­ä»£å™¨æœ‰æ•ˆæ€§æ—¶

### 5.2 é€‚åˆä½¿ç”¨unordered_mapçš„åœºæ™¯

1. **é¢‘ç¹æŸ¥æ‰¾æ“ä½œ**ï¼šéœ€è¦å¿«é€ŸæŸ¥æ‰¾ç‰¹å®šå…ƒç´ 
2. **å¯¹å…ƒç´ é¡ºåºæ— è¦æ±‚**ï¼šä¸å…³å¿ƒå…ƒç´ çš„å­˜å‚¨é¡ºåº
3. **å¤§é‡éšæœºè®¿é—®**ï¼šéœ€è¦å¿«é€Ÿè®¿é—®ä»»æ„å…ƒç´ 

ğŸ’» **ä»£ç ç¤ºä¾‹ä¸ä½¿ç”¨æ–¹æ³•**

### 6.1 åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <iostream>
#include <map>
#include <unordered_map>
#include <string>

using namespace std;

int main() {
    // 1. mapçš„ä½¿ç”¨
    cout << "=== mapç¤ºä¾‹ ===" << endl;
    map<int, string> mapExample;
    
    // æ’å…¥å…ƒç´ 
    mapExample[1] = "å¼ ä¸‰";
    mapExample.insert(pair<int, string>(2, "æå››"));
    mapExample.emplace(3, "ç‹äº”");
    
    // éå†å…ƒç´ ï¼ˆæœ‰åºï¼‰
    for (const auto& pair : mapExample) {
        cout << pair.first << ": " << pair.second << endl;
    }
    
    // æŸ¥æ‰¾å…ƒç´ 
    auto mapIter = mapExample.find(2);
    if (mapIter != mapExample.end()) {
        cout << "æ‰¾åˆ°å…ƒç´ : " << mapIter->second << endl;
    }
    
    // 2. unordered_mapçš„ä½¿ç”¨
    cout << "\n=== unordered_mapç¤ºä¾‹ ===" << endl;
    unordered_map<int, string> unorderedMapExample;
    
    // æ’å…¥å…ƒç´ 
    unorderedMapExample[1] = "å¼ ä¸‰";
    unorderedMapExample.insert(pair<int, string>(2, "æå››"));
    unorderedMapExample.emplace(3, "ç‹äº”");
    
    // éå†å…ƒç´ ï¼ˆæ— åºï¼‰
    for (const auto& pair : unorderedMapExample) {
        cout << pair.first << ": " << pair.second << endl;
    }
    
    // æŸ¥æ‰¾å…ƒç´ 
    auto unorderedMapIter = unorderedMapExample.find(2);
    if (unorderedMapIter != unorderedMapExample.end()) {
        cout << "æ‰¾åˆ°å…ƒç´ : " << unorderedMapIter->second << endl;
    }
    
    return 0;
}
```

### 6.2 è¾“å‡ºç»“æœå¯¹æ¯”

**mapè¾“å‡º**ï¼ˆæœ‰åºï¼‰ï¼š
```cpp
=== mapç¤ºä¾‹ ===
1: å¼ ä¸‰
2: æå››
3: ç‹äº”
æ‰¾åˆ°å…ƒç´ : æå››
```

**unordered_mapè¾“å‡º**ï¼ˆæ— åºï¼‰ï¼š
```cpp
=== unordered_mapç¤ºä¾‹ ===
3: ç‹äº”
2: æå››
1: å¼ ä¸‰
æ‰¾åˆ°å…ƒç´ : æå››
```

### 6.3 å¸¸ç”¨æ“ä½œæ±‡æ€»

| æ“ä½œ | å‡½æ•°ç­¾å | åŠŸèƒ½æè¿° |
|------|---------|---------|
| æ’å…¥ | `insert(const value_type& val)` | æ’å…¥é”®å€¼å¯¹ |
| æ’å…¥ | `operator[](const key_type& k)` | è®¿é—®æˆ–æ’å…¥é”®å€¼å¯¹ |
| æŸ¥æ‰¾ | `find(const key_type& k)` | æŸ¥æ‰¾é”®kï¼Œè¿”å›è¿­ä»£å™¨ |
| è®¡æ•° | `count(const key_type& k)` | ç»Ÿè®¡é”®kå‡ºç°çš„æ¬¡æ•°ï¼ˆ0æˆ–1ï¼‰ |
| åˆ é™¤ | `erase(const key_type& k)` | åˆ é™¤é”®kå¯¹åº”çš„å…ƒç´  |
| å¤§å° | `size()` | è¿”å›å…ƒç´ ä¸ªæ•° |
| æ¸…ç©º | `clear()` | æ¸…ç©ºæ‰€æœ‰å…ƒç´  |
| åˆ¤ç©º | `empty()` | åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º |

â±ï¸ **æ€§èƒ½å¯¹æ¯”æµ‹è¯•**

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ€§èƒ½å¯¹æ¯”æµ‹è¯•ï¼Œå±•ç¤ºä¸¤ç§å®¹å™¨åœ¨ä¸åŒæ“ä½œä¸‹çš„æ€§èƒ½å·®å¼‚ï¼š

```cpp
#include <iostream>
#include <map>
#include <unordered_map>
#include <chrono>
#include <cstdlib>

using namespace std;
using namespace chrono;

const int TEST_SIZE = 1000000;

int main() {
    map<int, int> mapTest;
    unordered_map<int, int> unorderedMapTest;
    
    // ç”Ÿæˆéšæœºæ•°æ®
    srand(time(nullptr));
    int* keys = new int[TEST_SIZE];
    for (int i = 0; i < TEST_SIZE; ++i) {
        keys[i] = rand();
    }
    
    // æµ‹è¯•æ’å…¥æ€§èƒ½
    cout << "æµ‹è¯•æ’å…¥æ€§èƒ½..." << endl;
    
    auto start = high_resolution_clock::now();
    for (int i = 0; i < TEST_SIZE; ++i) {
        mapTest[keys[i]] = i;
    }
    auto end = high_resolution_clock::now();
    auto mapInsertTime = duration_cast<milliseconds>(end - start).count();
    cout << "mapæ’å…¥æ—¶é—´: " << mapInsertTime << "ms" << endl;
    
    start = high_resolution_clock::now();
    for (int i = 0; i < TEST_SIZE; ++i) {
        unorderedMapTest[keys[i]] = i;
    }
    end = high_resolution_clock::now();
    auto unorderedMapInsertTime = duration_cast<milliseconds>(end - start).count();
    cout << "unordered_mapæ’å…¥æ—¶é—´: " << unorderedMapInsertTime << "ms" << endl;
    
    // æµ‹è¯•æŸ¥æ‰¾æ€§èƒ½
    cout << "\næµ‹è¯•æŸ¥æ‰¾æ€§èƒ½..." << endl;
    
    start = high_resolution_clock::now();
    for (int i = 0; i < TEST_SIZE; ++i) {
        mapTest.find(keys[i]);
    }
    end = high_resolution_clock::now();
    auto mapFindTime = duration_cast<milliseconds>(end - start).count();
    cout << "mapæŸ¥æ‰¾æ—¶é—´: " << mapFindTime << "ms" << endl;
    
    start = high_resolution_clock::now();
    for (int i = 0; i < TEST_SIZE; ++i) {
        unorderedMapTest.find(keys[i]);
    }
    end = high_resolution_clock::now();
    auto unorderedMapFindTime = duration_cast<milliseconds>(end - start).count();
    cout << "unordered_mapæŸ¥æ‰¾æ—¶é—´: " << unorderedMapFindTime << "ms" << endl;
    
    delete[] keys;
    return 0;
}
```

ğŸŒŸ **æœ€ä½³å®è·µå»ºè®®**

1. **ä¼˜å…ˆè€ƒè™‘unordered_map**ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œunordered_mapçš„æ€§èƒ½æ›´ä¼˜ï¼Œå°¤å…¶æ˜¯æŸ¥æ‰¾æ“ä½œé¢‘ç¹æ—¶
2. **éœ€è¦æœ‰åºæ•°æ®æ—¶ä½¿ç”¨map**ï¼šå½“éœ€è¦å…ƒç´ ä¿æŒç‰¹å®šé¡ºåºæˆ–è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶
3. **æ³¨æ„é”®ç±»å‹çš„é€‰æ‹©**ï¼š
   - å¯¹äºmapï¼Œç¡®ä¿é”®ç±»å‹æ”¯æŒ`<`è¿ç®—ç¬¦
   - å¯¹äºunordered_mapï¼Œç¡®ä¿é”®ç±»å‹æœ‰åˆé€‚çš„å“ˆå¸Œå‡½æ•°
4. **è‡ªå®šä¹‰ç±»å‹ä½œä¸ºé”®**ï¼š
   - å¯¹äºmapï¼Œéœ€è¦é‡è½½`<`è¿ç®—ç¬¦
   - å¯¹äºunordered_mapï¼Œéœ€è¦é‡è½½`==`è¿ç®—ç¬¦å¹¶æä¾›å“ˆå¸Œå‡½æ•°
5. **å†…å­˜ä¸æ€§èƒ½æƒè¡¡**ï¼šunordered_mapé€šå¸¸æ¯”mapå ç”¨æ›´å¤šå†…å­˜ï¼Œä½†æä¾›æ›´å¿«çš„è®¿é—®é€Ÿåº¦
6. **é¿å…é¢‘ç¹rehash**ï¼šå¯¹äºunordered_mapï¼Œå¯ä»¥é€šè¿‡`reserve()`é¢„å…ˆåˆ†é…è¶³å¤Ÿçš„ç©ºé—´ï¼Œå‡å°‘rehashæ¬¡æ•°

ğŸ“‹ **æ€»ç»“**

| å¯¹æ¯”ç»´åº¦ | map | unordered_map |
|---------|-----|---------------|
| å®ç°æœºåˆ¶ | çº¢é»‘æ ‘ | å“ˆå¸Œè¡¨ |
| å…ƒç´ é¡ºåº | æœ‰åº | æ— åº |
| æ—¶é—´å¤æ‚åº¦ | O(log n) | å¹³å‡O(1) |
| ç©ºé—´å ç”¨ | è¾ƒä½ | è¾ƒé«˜ |
| è¿­ä»£å™¨ç¨³å®šæ€§ | ç¨³å®š | ä¸ç¨³å®šï¼ˆrehashæ—¶å¤±æ•ˆï¼‰ |
| é€‚ç”¨åœºæ™¯ | æœ‰åºæ•°æ®ã€èŒƒå›´æŸ¥è¯¢ | é¢‘ç¹æŸ¥æ‰¾ã€å¯¹é¡ºåºæ— è¦æ±‚ |

åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®¹å™¨ï¼š

- å¦‚æœéœ€è¦**æœ‰åºæ•°æ®**æˆ–**èŒƒå›´æŸ¥è¯¢**ï¼Œé€‰æ‹©`map`
- å¦‚æœéœ€è¦**å¿«é€ŸæŸ¥æ‰¾**æˆ–**å¤§é‡éšæœºè®¿é—®**ï¼Œé€‰æ‹©`unordered_map`
- è€ƒè™‘**å†…å­˜é™åˆ¶**ï¼š`map`çš„å†…å­˜å ç”¨æ›´ä½
- è€ƒè™‘**è¿­ä»£å™¨ç¨³å®šæ€§**ï¼š`map`çš„è¿­ä»£å™¨æ›´ç¨³å®š

é€šè¿‡åˆç†é€‰æ‹©å®¹å™¨ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œå‡å°‘ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚