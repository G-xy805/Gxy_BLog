---
title: 45.newå¯ä»¥é‡è½½å—ï¼Œå¯ä»¥æ”¹å†™newå‡½æ•°å—
order: 45
description: è¯¦è§£C++ä¸­new/deleteè¿ç®—ç¬¦çš„é‡è½½æœºåˆ¶ã€å®ç°æ–¹æ³•åŠä½¿ç”¨åœºæ™¯
published: 2026-01-23
image: /assets/images/cpp-logo.webp
tags:
- å†…å­˜ç®¡ç†
- newè¿ç®—ç¬¦
- è¿ç®—ç¬¦é‡è½½
- è‡ªå®šä¹‰å†…å­˜åˆ†é…
category: C++
---
# ğŸ”¬ newå¯ä»¥é‡è½½å—ï¼Œå¯ä»¥æ”¹å†™newå‡½æ•°å—
## ğŸ“‹ æ€»ç»“

ğŸ“– å†…å®¹æ¦‚è§ˆ
æœ¬æ–‡è¯¦ç»†ä»‹ç»C++ä¸­newå’Œdeleteè¿ç®—ç¬¦çš„é‡è½½æœºåˆ¶ï¼ŒåŒ…æ‹¬å…¨å±€é‡è½½å’Œç±»çº§é‡è½½ã€ä¸åŒå½¢å¼çš„new/deleteé‡è½½å‡½æ•°ã€é‡è½½çš„å®ç°æ–¹æ³•ä»¥åŠå®é™…åº”ç”¨åœºæ™¯ã€‚é€šè¿‡æ·±å…¥çš„åŸç†åˆ†æå’Œä¸°å¯Œçš„ä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©è¯»è€…ç†è§£å¦‚ä½•é€šè¿‡é‡è½½new/deleteå‡½æ•°å®ç°è‡ªå®šä¹‰å†…å­˜ç®¡ç†ï¼Œå¦‚å†…å­˜æ± ã€å†…å­˜æ³„æ¼æ£€æµ‹ã€è¶Šç•Œæ£€æŸ¥ç­‰é«˜çº§åŠŸèƒ½ã€‚
ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ
## ğŸ“Œ 1. newå’Œdeleteçš„é‡è½½æ¦‚è¿°

### 1.1 åŸºæœ¬æ¦‚å¿µ
- **newæ“ä½œç¬¦**ï¼šC++å…³é”®å­—ï¼Œç”¨äºåŠ¨æ€åˆ†é…å†…å­˜å¹¶æ„é€ å¯¹è±¡
- **operator new**ï¼šnewæ“ä½œç¬¦åº•å±‚è°ƒç”¨çš„å†…å­˜åˆ†é…å‡½æ•°ï¼Œå¯ä»¥è¢«é‡è½½
- **operator delete**ï¼šdeleteæ“ä½œç¬¦åº•å±‚è°ƒç”¨çš„å†…å­˜é‡Šæ”¾å‡½æ•°ï¼Œå¯ä»¥è¢«é‡è½½
- **é‡è½½åˆ†ç±»**ï¼šå…¨å±€é‡è½½å’Œç±»çº§é‡è½½
### 1.2 é‡è½½çš„æ„ä¹‰
- **è‡ªå®šä¹‰å†…å­˜ç®¡ç†**ï¼šå®ç°å†…å­˜æ± ã€å†…å­˜ç¼“å­˜ç­‰é«˜çº§å†…å­˜ç®¡ç†ç­–ç•¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé’ˆå¯¹ç‰¹å®šç±»å‹ä¼˜åŒ–å†…å­˜åˆ†é…ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡
- **å†…å­˜ç›‘æ§**ï¼šå®ç°å†…å­˜æ³„æ¼æ£€æµ‹ã€è¶Šç•Œæ£€æŸ¥ç­‰è°ƒè¯•åŠŸèƒ½
- **ç»Ÿè®¡åˆ†æ**ï¼šæ”¶é›†å†…å­˜åˆ†é…çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚åˆ†é…æ¬¡æ•°ã€å¤§å°åˆ†å¸ƒç­‰
- **å¼‚å¸¸å¤„ç†**ï¼šè‡ªå®šä¹‰å†…å­˜åˆ†é…å¤±è´¥æ—¶çš„å¤„ç†æ–¹å¼
## ğŸ“Œ 2. new/deleteé‡è½½çš„å½¢å¼

C++æ ‡å‡†åº“ä¸­å®šä¹‰äº†å¤šç§å½¢å¼çš„new/deleteå‡½æ•°ï¼Œéƒ½å¯ä»¥è¢«é‡è½½ï¼š
### 2.1 å…¨å±€new/deleteé‡è½½å‡½æ•°
```cpp
// åŸºæœ¬å½¢å¼
void* operator new(std::size_t size);
void operator delete(void* ptr) noexcept;
// æ•°ç»„å½¢å¼
void* operator new[](std::size_t size);
void operator delete[](void* ptr) noexcept;
// ä¸æŠ›å‡ºå¼‚å¸¸çš„å½¢å¼
void* operator new(std::size_t size, const std::nothrow_t&) noexcept;
void operator delete(void* ptr, const std::nothrow_t&) noexcept;
// æ•°ç»„ä¸æŠ›å‡ºå¼‚å¸¸çš„å½¢å¼
void* operator new[](std::size_t size, const std::nothrow_t&) noexcept;
void operator delete[](void* ptr, const std::nothrow_t&) noexcept;
// placement newï¼ˆä¸èƒ½è¢«é‡è½½ï¼‰
void* operator new(std::size_t size, void* ptr) noexcept;
void operator delete(void* ptr, void* place) noexcept;
```
### 2.2 ç±»çº§new/deleteé‡è½½å‡½æ•°
```cpp
class MyClass {
public:
    // ç±»ä¸“å±çš„new/delete
    static void* operator new(std::size_t size);
    static void operator delete(void* ptr) noexcept;
    
    // ç±»ä¸“å±çš„æ•°ç»„new/delete
    static void* operator new[](std::size_t size);
    static void operator delete[](void* ptr) noexcept;
    // ç±»ä¸“å±çš„ä¸æŠ›å‡ºå¼‚å¸¸çš„new/delete
    static void* operator new(std::size_t size, const std::nothrow_t&) noexcept;
    static void operator delete(void* ptr, const std::nothrow_t&) noexcept;
};
```
ğŸ’» ä»£ç ç¤ºä¾‹
### 1. å…¨å±€new/deleteé‡è½½ç¤ºä¾‹
```cpp
#include <iostream>
#include <new>
#include <cstdlib>

// å…¨å±€newé‡è½½
void* operator new(std::size_t size) {
    std::cout << "å…¨å±€newé‡è½½ï¼Œåˆ†é… " << size << " å­—èŠ‚" << std::endl;
    void* ptr = std::malloc(size);
    if (!ptr) {
        throw std::bad_alloc();
    }
    return ptr;
}

// å…¨å±€deleteé‡è½½
void operator delete(void* ptr) noexcept {
    std::cout << "å…¨å±€deleteé‡è½½ï¼Œé‡Šæ”¾å†…å­˜" << std::endl;
    std::free(ptr);
}

// å…¨å±€æ•°ç»„newé‡è½½
void* operator new[](std::size_t size) {
    std::cout << "å…¨å±€æ•°ç»„newé‡è½½ï¼Œåˆ†é… " << size << " å­—èŠ‚" << std::endl;
    void* ptr = std::malloc(size);
    if (!ptr) {
        throw std::bad_alloc();
    }
    return ptr;
}

// å…¨å±€æ•°ç»„deleteé‡è½½
void operator delete[](void* ptr) noexcept {
    std::cout << "å…¨å±€æ•°ç»„deleteé‡è½½ï¼Œé‡Šæ”¾å†…å­˜" << std::endl;
    std::free(ptr);
}

class Test {
public:
    Test() { std::cout << "Testæ„é€ å‡½æ•°" << std::endl; }
    ~Test() { std::cout << "Testææ„å‡½æ•°" << std::endl; }

private:
    int data;
};

int main() {
    std::cout << "=== æµ‹è¯•åŸºæœ¬new/delete ===" << std::endl;
    Test* t1 = new Test();
    delete t1;
    
    std::cout << "\n=== æµ‹è¯•æ•°ç»„new[]/delete[] ===" << std::endl;
    Test* t2 = new Test[3];
    delete[] t2;
    
    return 0;
}
```
### 2. ç±»çº§new/deleteé‡è½½ç¤ºä¾‹
```cpp
#include <iostream>
#include <new>
#include <cstdlib>

class MemoryPooledClass {
public:
    MemoryPooledClass() {
        std::cout << "MemoryPooledClassæ„é€ å‡½æ•°" << std::endl;
        id = ++count;
    }
    
    ~MemoryPooledClass() {
        std::cout << "MemoryPooledClassææ„å‡½æ•°ï¼Œid=" << id << std::endl;
    }
    
    // ç±»çº§newé‡è½½
    static void* operator new(std::size_t size) {
        std::cout << "MemoryPooledClass::operator newï¼Œåˆ†é… " << size << " å­—èŠ‚" << std::endl;
        // è¿™é‡Œå¯ä»¥å®ç°å†…å­˜æ± ï¼Œç°åœ¨ç®€å•ä½¿ç”¨malloc
        void* ptr = std::malloc(size);
        if (!ptr) {
            throw std::bad_alloc();
        }
        return ptr;
    }
    
    // ç±»çº§deleteé‡è½½
    static void operator delete(void* ptr) noexcept {
        std::cout << "MemoryPooledClass::operator deleteï¼Œé‡Šæ”¾å†…å­˜" << std::endl;
        std::free(ptr);
    }
    
    // ç±»çº§æ•°ç»„newé‡è½½
    static void* operator new[](std::size_t size) {
        std::cout << "MemoryPooledClass::operator new[]ï¼Œåˆ†é… " << size << " å­—èŠ‚" << std::endl;
        void* ptr = std::malloc(size);
        if (!ptr) {
            throw std::bad_alloc();
        }
        return ptr;
    }
    
    // ç±»çº§æ•°ç»„deleteé‡è½½
    static void operator delete[](void* ptr) noexcept {
        std::cout << "MemoryPooledClass::operator delete[]ï¼Œé‡Šæ”¾å†…å­˜" << std::endl;
        std::free(ptr);
    }
    
private:
    int id;
    static int count;
    int data[100];  // æ¨¡æ‹Ÿè¾ƒå¤§çš„æ•°æ®æˆå‘˜
};

int MemoryPooledClass::count = 0;

class NormalClass {
public:
    NormalClass() { std::cout << "NormalClassæ„é€ å‡½æ•°" << std::endl; }
    ~NormalClass() { std::cout << "NormalClassææ„å‡½æ•°" << std::endl; }
    
private:
    int data;
};

int main() {
    std::cout << "=== æµ‹è¯•ç±»çº§new/delete ===" << std::endl;
    MemoryPooledClass* p1 = new MemoryPooledClass();
    delete p1;
    
    std::cout << "\n=== æµ‹è¯•ç±»çº§æ•°ç»„new[]/delete[] ===" << std::endl;
    MemoryPooledClass* p2 = new MemoryPooledClass[2];
    delete[] p2;
    
    std::cout << "\n=== æµ‹è¯•æ™®é€šç±»ï¼ˆä½¿ç”¨å…¨å±€new/deleteï¼‰ ===" << std::endl;
    NormalClass* p3 = new NormalClass();
    delete p3;
    
    return 0;
}
```
### 3. å†…å­˜æ³„æ¼æ£€æµ‹ç¤ºä¾‹
```cpp
#include <iostream>
#include <map>
#include <string>
#include <new>
#include <cstdlib>

// å†…å­˜æ³„æ¼æ£€æµ‹ç±»
class MemoryLeakDetector {
public:
    static MemoryLeakDetector& getInstance() {
        static MemoryLeakDetector instance;
        return instance;
    }
    
    void addAllocation(void* ptr, std::size_t size, const char* file, int line) {
        allocations[ptr] = {size, file, line};
        totalAllocated += size;
        std::cout << "åˆ†é…å†…å­˜ï¼š" << size << " å­—èŠ‚ï¼Œåœ°å€ï¼š" << ptr 
                  << "ï¼Œä½ç½®ï¼š" << file << ":" << line << std::endl;
    }
    
    void removeAllocation(void* ptr) {
        auto it = allocations.find(ptr);
        if (it != allocations.end()) {
            totalAllocated -= it->second.size;
            std::cout << "é‡Šæ”¾å†…å­˜ï¼š" << it->second.size << " å­—èŠ‚ï¼Œåœ°å€ï¼š" << ptr << std::endl;
            allocations.erase(it);
        }
    }
    
    ~MemoryLeakDetector() {
        std::cout << "\n=== å†…å­˜æ³„æ¼æŠ¥å‘Š ===" << std::endl;
        if (allocations.empty()) {
            std::cout << "æ²¡æœ‰å†…å­˜æ³„æ¼ï¼" << std::endl;
        } else {
            std::cout << "å‘ç° " << allocations.size() << " å¤„å†…å­˜æ³„æ¼ï¼Œæ€»è®¡ " 
                      << totalAllocated << " å­—èŠ‚ï¼š" << std::endl;
            for (const auto& alloc : allocations) {
                std::cout << "  åœ°å€ï¼š" << alloc.first << "ï¼Œå¤§å°ï¼š" << alloc.second.size 
                          << " å­—èŠ‚ï¼Œä½ç½®ï¼š" << alloc.second.file << ":" << alloc.second.line << std::endl;
            }
        }
        std::cout << "====================" << std::endl;
    }
    
private:
    struct AllocationInfo {
        std::size_t size;
        std::string file;
        int line;
    };
    
    std::map<void*, AllocationInfo> allocations;
    std::size_t totalAllocated = 0;
    
    MemoryLeakDetector() = default;
    ~MemoryLeakDetector() = default;
    MemoryLeakDetector(const MemoryLeakDetector&) = delete;
    MemoryLeakDetector& operator=(const MemoryLeakDetector&) = delete;
};

// è‡ªå®šä¹‰newå®ï¼Œè®°å½•æ–‡ä»¶å’Œè¡Œå·
#define new new(__FILE__, __LINE__)

// æ”¯æŒæ–‡ä»¶å’Œè¡Œå·çš„newé‡è½½
void* operator new(std::size_t size, const char* file, int line) {
    void* ptr = std::malloc(size);
    if (!ptr) {
        throw std::bad_alloc();
    }
    MemoryLeakDetector::getInstance().addAllocation(ptr, size, file, line);
    return ptr;
}

// æ”¯æŒæ•°ç»„çš„new[]é‡è½½
void* operator new[](std::size_t size, const char* file, int line) {
    void* ptr = std::malloc(size);
    if (!ptr) {
        throw std::bad_alloc();
    }
    MemoryLeakDetector::getInstance().addAllocation(ptr, size, file, line);
    return ptr;
}

// åŒ¹é…çš„deleteé‡è½½ï¼ˆç”¨äºæ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼‰
void operator delete(void* ptr, const char* file, int line) noexcept {
    MemoryLeakDetector::getInstance().removeAllocation(ptr);
    std::free(ptr);
}

// åŒ¹é…çš„æ•°ç»„delete[]é‡è½½ï¼ˆç”¨äºæ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼‰
void operator delete[](void* ptr, const char* file, int line) noexcept {
    MemoryLeakDetector::getInstance().removeAllocation(ptr);
    std::free(ptr);
}

// æ™®é€šdeleteé‡è½½
void operator delete(void* ptr) noexcept {
    MemoryLeakDetector::getInstance().removeAllocation(ptr);
    std::free(ptr);
}

// æ™®é€šæ•°ç»„delete[]é‡è½½
void operator delete[](void* ptr) noexcept {
    MemoryLeakDetector::getInstance().removeAllocation(ptr);
    std::free(ptr);
}

// æµ‹è¯•ç±»
class Test {
public:
    Test() { /* æ„é€ å‡½æ•° */ }
    ~Test() { /* ææ„å‡½æ•° */ }
    
private:
    int data[100];
};

int main() {
    std::cout << "=== å†…å­˜æ³„æ¼æ£€æµ‹æµ‹è¯• ===" << std::endl;
    
    // æ­£å¸¸é‡Šæ”¾çš„å†…å­˜
    Test* p1 = new Test();
    delete p1;
    
    // å†…å­˜æ³„æ¼ï¼ˆæ•…æ„ä¸é‡Šæ”¾ï¼‰
    Test* p2 = new Test();
    std::cout << "æ•…æ„æ³„æ¼å†…å­˜ï¼Œåœ°å€ï¼š" << p2 << std::endl;
    
    // æ•°ç»„å†…å­˜æ³„æ¼
    Test* p3 = new Test[5];
    std::cout << "æ•…æ„æ³„æ¼æ•°ç»„å†…å­˜ï¼Œåœ°å€ï¼š" << p3 << std::endl;
    
    std::cout << "ç¨‹åºç»“æŸï¼Œæ£€æµ‹å†…å­˜æ³„æ¼..." << std::endl;
    
    return 0;
}
```
## ğŸ“Œ 3. new/deleteé‡è½½çš„è°ƒç”¨é¡ºåº

### 3.1 newæ“ä½œç¬¦çš„è°ƒç”¨é¡ºåº
1. è°ƒç”¨`operator new`åˆ†é…å†…å­˜
2. è°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–å†…å­˜
3. è¿”å›æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆ
### 3.2 deleteæ“ä½œç¬¦çš„è°ƒç”¨é¡ºåº
1. è°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°
2. è°ƒç”¨`operator delete`é‡Šæ”¾å†…å­˜
## âš ï¸ 4. é‡è½½new/deleteçš„æ³¨æ„äº‹é¡¹

### 4.1 ä¸æ ‡å‡†åº“çš„å…¼å®¹æ€§
- é‡è½½çš„new/deleteå‡½æ•°åº”è¯¥ä¸æ ‡å‡†åº“çš„è¡Œä¸ºå…¼å®¹
- é‡è½½çš„newå‡½æ•°åº”æ­£ç¡®å¤„ç†åˆ†é…å¤±è´¥çš„æƒ…å†µï¼ˆæŠ›å‡ºå¼‚å¸¸æˆ–è¿”å›nullptrï¼‰
- é‡è½½çš„deleteå‡½æ•°åº”èƒ½å®‰å…¨å¤„ç†nullptr
### 4.2 å†…å­˜å¯¹é½
- è‡ªå®šä¹‰newå‡½æ•°åº”ç¡®ä¿è¿”å›çš„å†…å­˜åœ°å€æ­£ç¡®å¯¹é½
- å¯¹äºç‰¹å®šå¹³å°ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨`alignas`æˆ–å¹³å°ç‰¹å®šçš„å¯¹é½å‡½æ•°
### 4.3 çº¿ç¨‹å®‰å…¨
- å…¨å±€new/deleteé‡è½½åº”ä¿è¯çº¿ç¨‹å®‰å…¨
- å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œåº”ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„å†…å­˜åˆ†é…å™¨
### 4.4 ä¸è¦ç ´åè¯­è¨€è§„åˆ™
- ä¸è¦ä¿®æ”¹new/deleteçš„åŸºæœ¬è¯­ä¹‰
- ä¸è¦åœ¨é‡è½½å‡½æ•°ä¸­æ‰§è¡Œä¸å†…å­˜åˆ†é…æ— å…³çš„æ“ä½œ
- æ­£ç¡®å¤„ç†æ•°ç»„å’Œéæ•°ç»„å½¢å¼
### 4.5 placement new
- placement newçš„åŸºæœ¬å½¢å¼`void* operator new(std::size_t, void*) noexcept`ä¸èƒ½è¢«é‡è½½
- å¯ä»¥è‡ªå®šä¹‰å…¶ä»–å½¢å¼çš„placement new
## ğŸ“Œ 5. new/deleteé‡è½½çš„å®é™…åº”ç”¨

### 5.1 å†…å­˜æ± 
å†…å­˜æ± æ˜¯æœ€å¸¸è§çš„new/deleteé‡è½½åº”ç”¨ï¼Œç”¨äºï¼š
- å‡å°‘å†…å­˜åˆ†é…çš„ç³»ç»Ÿè°ƒç”¨å¼€é”€
- å‡å°‘å†…å­˜ç¢ç‰‡
- æé«˜å†…å­˜åˆ†é…çš„å±€éƒ¨æ€§
- é€‚åˆé¢‘ç¹åˆ†é…å°å¯¹è±¡çš„åœºæ™¯
### 5.2 å†…å­˜æ³„æ¼æ£€æµ‹
é€šè¿‡é‡è½½new/deleteå‡½æ•°å®ç°å†…å­˜æ³„æ¼æ£€æµ‹ï¼š
- è®°å½•æ¯æ¬¡å†…å­˜åˆ†é…çš„åœ°å€ã€å¤§å°ã€ä½ç½®
- ç¨‹åºç»“æŸæ—¶æ£€æŸ¥æœªé‡Šæ”¾çš„å†…å­˜
- ç”Ÿæˆè¯¦ç»†çš„æ³„æ¼æŠ¥å‘Š
### 5.3 è¶Šç•Œæ£€æŸ¥
åœ¨åˆ†é…å†…å­˜æ—¶é¢å¤–åˆ†é…ä¸€äº›ä¿æŠ¤å­—èŠ‚ï¼Œç”¨äºï¼š
- æ£€æµ‹å†…å­˜è¶Šç•Œå†™å…¥
- æ£€æµ‹åŒé‡é‡Šæ”¾
- æ£€æµ‹ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜
### 5.4 ç»Ÿè®¡åˆ†æ
æ”¶é›†å†…å­˜åˆ†é…çš„ç»Ÿè®¡ä¿¡æ¯ï¼š
- åˆ†é…æ¬¡æ•°å’Œé‡Šæ”¾æ¬¡æ•°
- å†…å­˜åˆ†é…çš„å¤§å°åˆ†å¸ƒ
- æœ€å¤§å†…å­˜å ç”¨
- å¹³å‡åˆ†é…å¤§å°
### 5.5 ç‰¹å®šç±»å‹ä¼˜åŒ–
ä¸ºç‰¹å®šç±»å‹ä¼˜åŒ–å†…å­˜åˆ†é…ï¼š
- ä¸ºé¢‘ç¹ä½¿ç”¨çš„ç±»å‹é¢„åˆ†é…å†…å­˜
- é’ˆå¯¹ç±»å‹å¤§å°ä¼˜åŒ–å†…å­˜å¸ƒå±€
- å®ç°ç±»å‹ä¸“å±çš„å†…å­˜ç®¡ç†ç­–ç•¥
## ğŸ“Œ 6. æ— æ³•é‡è½½çš„new/deleteå½¢å¼

- placement newçš„åŸºæœ¬å½¢å¼ï¼š`void* operator new(std::size_t, void*) noexcept`
- placement deleteçš„åŸºæœ¬å½¢å¼ï¼š`void operator delete(void*, void*) noexcept`
è¿™äº›å½¢å¼ç”±ç¼–è¯‘å™¨å®ç°ï¼Œç”¨äºåœ¨æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶é‡Šæ”¾å†…å­˜ã€‚
âš ï¸ æ³¨æ„äº‹é¡¹
1. **åŒ¹é…ä½¿ç”¨**ï¼šnew/deleteå¿…é¡»åŒ¹é…ä½¿ç”¨ï¼Œnew[]/delete[]å¿…é¡»åŒ¹é…ä½¿ç”¨
2. **å¼‚å¸¸å®‰å…¨æ€§**ï¼šé‡è½½newå‡½æ•°æ—¶è¦è€ƒè™‘å¼‚å¸¸å®‰å…¨æ€§ï¼Œç¡®ä¿åœ¨æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶èƒ½æ­£ç¡®é‡Šæ”¾å†…å­˜
3. **çº¿ç¨‹å®‰å…¨**ï¼šå…¨å±€é‡è½½çš„new/deleteå¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„
4. **å†…å­˜å¯¹é½**ï¼šç¡®ä¿é‡è½½çš„newå‡½æ•°è¿”å›çš„å†…å­˜åœ°å€æ­£ç¡®å¯¹é½
5. **æµ‹è¯•éªŒè¯**ï¼šé‡è½½new/deleteåè¦è¿›è¡Œå……åˆ†çš„æµ‹è¯•ï¼Œç¡®ä¿ä¸ç ´åç°æœ‰ä»£ç 
6. **æ€§èƒ½æµ‹è¯•**ï¼šè¯„ä¼°é‡è½½new/deleteå¯¹ç¨‹åºæ€§èƒ½çš„å½±å“
7. **æ–‡æ¡£è¯´æ˜**ï¼šä¸ºè‡ªå®šä¹‰çš„å†…å­˜ç®¡ç†ç­–ç•¥æä¾›æ¸…æ™°çš„æ–‡æ¡£
ğŸ“š æ€»ç»“ä¸æœ€ä½³å®è·µ
### 1. æ ¸å¿ƒæ€»ç»“
- **new/deleteå¯ä»¥è¢«é‡è½½**ï¼šæ”¯æŒå…¨å±€é‡è½½å’Œç±»çº§é‡è½½
- **å¤šç§é‡è½½å½¢å¼**ï¼šåŒ…æ‹¬åŸºæœ¬å½¢å¼ã€æ•°ç»„å½¢å¼ã€ä¸æŠ›å‡ºå¼‚å¸¸å½¢å¼ç­‰
- **å¹¿æ³›çš„åº”ç”¨åœºæ™¯**ï¼šå†…å­˜æ± ã€å†…å­˜æ³„æ¼æ£€æµ‹ã€è¶Šç•Œæ£€æŸ¥ã€ç»Ÿè®¡åˆ†æç­‰
- **æ³¨æ„å…¼å®¹æ€§**ï¼šé‡è½½çš„new/deleteåº”ä¸æ ‡å‡†åº“è¡Œä¸ºå…¼å®¹
- **çº¿ç¨‹å®‰å…¨**ï¼šå…¨å±€é‡è½½å¿…é¡»ä¿è¯çº¿ç¨‹å®‰å…¨
### 2. æœ€ä½³å®è·µ
1. **ä¼˜å…ˆä½¿ç”¨ç±»çº§é‡è½½**ï¼šç±»çº§é‡è½½åªå½±å“ç‰¹å®šç±»ï¼Œä¸ä¼šå½±å“å…¨å±€å†…å­˜åˆ†é…
2. **å®ç°å®Œæ•´çš„é‡è½½é›†**ï¼šå¦‚æœé‡è½½äº†newï¼Œåº”åŒæ—¶é‡è½½å¯¹åº”çš„delete
3. **è€ƒè™‘å¼‚å¸¸å®‰å…¨æ€§**ï¼šæ­£ç¡®å¤„ç†æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸çš„æƒ…å†µ
4. **ä½¿ç”¨RAII**ï¼šç»“åˆæ™ºèƒ½æŒ‡é’ˆç­‰RAIIæœºåˆ¶ä½¿ç”¨è‡ªå®šä¹‰å†…å­˜ç®¡ç†
5. **æµ‹è¯•å……åˆ†**ï¼šå¯¹é‡è½½çš„new/deleteè¿›è¡Œå…¨é¢æµ‹è¯•
6. **æ€§èƒ½ä¼˜åŒ–**ï¼šä»…åœ¨ç¡®å®éœ€è¦æ—¶æ‰é‡è½½new/deleteï¼Œé¿å…ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€
7. **æ–‡æ¡£åŒ–**ï¼šæ¸…æ™°è®°å½•è‡ªå®šä¹‰å†…å­˜ç®¡ç†çš„è¡Œä¸ºå’Œé™åˆ¶
### 3. ä½•æ—¶ä¸åº”è¯¥é‡è½½new/delete
- ç®€å•çš„åº”ç”¨ç¨‹åºï¼Œä¸éœ€è¦å¤æ‚çš„å†…å­˜ç®¡ç†
- å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœºæ™¯
- ç¼ºä¹è¶³å¤Ÿæµ‹è¯•å’ŒéªŒè¯çš„æƒ…å†µ
- å›¢é˜Ÿæˆå‘˜ä¸ç†Ÿæ‚‰è‡ªå®šä¹‰å†…å­˜ç®¡ç†çš„æƒ…å†µ
é€šè¿‡åˆç†é‡è½½new/deleteå‡½æ•°ï¼Œå¯ä»¥å®ç°å¼ºå¤§çš„è‡ªå®šä¹‰å†…å­˜ç®¡ç†åŠŸèƒ½ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€å¯è°ƒè¯•æ€§å’Œå¯é æ€§ã€‚ä½†æ˜¯ï¼Œé‡è½½new/deleteä¹Ÿå¸¦æ¥äº†é¢å¤–çš„å¤æ‚æ€§å’Œé£é™©ï¼Œéœ€è¦è°¨æ…ä½¿ç”¨å¹¶è¿›è¡Œå……åˆ†çš„æµ‹è¯•éªŒè¯ã€‚
åœ¨ç°ä»£C++å¼€å‘ä¸­ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“æä¾›çš„æ™ºèƒ½æŒ‡é’ˆå’Œå®¹å™¨ï¼Œå®ƒä»¬å·²ç»å®ç°äº†é«˜æ•ˆçš„å†…å­˜ç®¡ç†ã€‚åªæœ‰åœ¨ç¡®å®éœ€è¦è‡ªå®šä¹‰å†…å­˜ç®¡ç†ç­–ç•¥æ—¶ï¼Œæ‰è€ƒè™‘é‡è½½new/deleteå‡½æ•°ã€‚