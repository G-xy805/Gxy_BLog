---      
import BaseLayout from "@layouts/BaseLayout.astro";      
import Card from "@/components/temple/Card.astro";
import NavigationCard from "@components/mdx/NavigationCard.astro";      
import { Icon } from "astro-icon/components";      

// 定义导航数据结构
const navData = [
  {
    id: "development-tools",
    title: "开发工具",
    icon: "feather:code",
    items: [
      {
        name: "Umami",
        avatar: "https://img.xiaozhangya.xin/file/Logo/1753850918996_umami.png",
        description: "网站访问统计分析平台",
        url: "https://us.umami.is/dashboard",
        category: "统计分析",
        id: "DEV001"
      },
      {
        name: "Vercel",
        avatar: "https://img.xiaozhangya.xin/file/Logo/1753851435981_Vercel.png",
        description: "现代化的前端部署平台",
        url: "https://vercel.com/login?next=%2Fxz131714s-projects",
        category: "部署托管",
        id: "DEV002"
      },
      {
        name: "Iconify",
        avatar: "https://iconify.design/favicon.ico",
        description: "海量图标库和图标搜索工具",
        url: "https://iconify.design/",
        category: "图标设计",
        id: "DEV003"
      },
      {
        name: "Iconfont",
        avatar: "https://img.xiaozhangya.xin/file/Logo/DEPF9Ovv.png",
        description: "阿里巴巴图标库",
        url: "https://www.iconfont.cn/",
        category: "图标设计",
        id: "DEV004"
      },
      {
        name: "Shields",
        avatar: "https://shields.io/img/logo.png",
        description: "为项目生成各种徽章",
        url: "https://shields.io/",
        category: "徽章工具",
        id: "DEV005"
      },
      {
        name: "Clarity",
        avatar: "https://picbed.xiaozhangya.xin/picbed/20250726225237829.png",
        description: "微软的用户行为分析工具",
        url: "https://clarity.microsoft.com/",
        category: "用户分析",
        id: "DEV005"
      }
    ]
  },
  {    id: "service-platforms",    title: "服务平台",    icon: "feather:server",
    items: [
      {
        name: "DigitalPlat",
        avatar: "https://picbed.xiaozhangya.xin/picbed/20250726172053106.png",
        description: "免费域名注册",
        url: "https://dash.domain.digitalplat.org/panel/main",
        category: "域名管理",
        id: "SRV001"
      },
      {
        name: "Cloudflare",
        avatar: "https://www.cloudflare.com/favicon.ico",
        description: "全球领先的CDN和安全服务",
        url: "https://dash.cloudflare.com/login",
        category: "域名托管服务",
        id: "SRV002"
      },
      {
        name: "EdgeOne",
        avatar: "https://img.xiaozhangya.xin/file/Logo/cRfyZZ2A.png",
        description: "国内CDN和边缘计算服务",
        url: "https://console.edgeone.cn/login",
        category: "CDN服务",
        id: "SRV003"
      },
      {
        name: "Spaceship",
        avatar: "https://img.xiaozhangya.xin/file/Logo/1753850924810_Spaceship.png",
        description: "A domain odyssey",
        url: "https://www.spaceship.com/",
        category: "域名售卖",
        id: "SRV004"
      },
      {
        name: "Waline",
        avatar: "https://waline.js.org/favicon.ico",
        description: "简洁、安全的评论系统",
        url: "https://waline.js.org/",
        category: "评论服务",
        id: "SRV005"
      },
      {
        name: "Giscus",
        avatar: "https://avatars.githubusercontent.com/ml/9968?s=82&v=4",
        description: "GitHub Discussions 评论系统",
        url: "https://giscus.app/zh-CN",
        category: "评论服务",
        id: "SRV006"
      },
      {
        name: "Akismet",
        avatar: "https://img.xiaozhangya.xin/file/Logo/opkjgCvb.svg",
        description: "保持评论区干净整洁的小助手",
        url: "https://akismet.com/",
        category: "评论服务",
        id: "SRV007"
      },
      {
        name: "GitHub",
        avatar: "https://github.githubassets.com/favicons/favicon.svg",
        description: "全球最大的开源社区",
        url: "https://github.com",
        category: "代码托管",
        id: "SRV008"
      },
      {
        name: "InfinityFree",
        avatar: "https://img.xiaozhangya.xin/file/Logo/1754280946361_InfinityFree.png",
        description: "免费托管WordPress和其他网站",
        url: "https://www.infinityfree.com",
        category: "免费主机",
        id: "SRV009"
      }
    ]
  },
  {    id: "entertainment-resources",    title: "娱乐资源",    icon: "feather:image",
    items: [
      {
        name: "Wallhaven",
        avatar: "https://picbed.xiaozhangya.xin/picbed/20250726182418838.png",
        description: "高质量壁纸分享社区",
        url: "https://wallhaven.cc/",
        category: "壁纸资源",
        id: "ENT001"
      },
      {
        name: "网盘资源社",
        avatar: "https://img.xiaozhangya.xin/file/Logo/RwkDhIdV.png",
        description: "网盘资源分享平台",
        url: "https://www.wpzysq.com/",
        category: "网盘资源",
        id: "ENT002"
      },
      {
        name: "宝可梦节点",
        avatar: "https://52pokemon.huxx.top/favicon.ico",
        description: "网络代理服务",
        url: "https://52pokemon.huxx.top/login",
        category: "代理服务",
        id: "ENT003"
      }
    ]
  },
  {    id: "useful-resources",    title: "Useful Resources",    icon: "feather:bookmark",
    items: [
      {
        name: "Astro",
        avatar: "https://img.xiaozhangya.xin/file/Logo/HXADhsBn.png",
        description: "Astro是一个现代化的静态网站生成器，专注于性能和开发者体验。",
        url: "https://docs.astro.build",
        category: "文档",
        id: "RES001"
      },
      {
        name: "Tailwind",
        avatar: "https://img.xiaozhangya.xin/file/Logo/mrp0EiyB.png",
        description: "Tailwind CSS是一个功能类优先的CSS框架，提供了实用的样式类。",
        url: "https://tailwindcss.com/docs",
        category: "文档",
        id: "RES002"
      },
      {
        name: "DaisyUI",
        avatar: "https://img.xiaozhangya.xin/file/Logo/WEl6nL3H.svg",
        description: "DaisyUI是一个基于Tailwind CSS的组件库，提供了丰富的UI组件。",
        url: "https://daisyui.com/components/",
        category: "UI 框架",
        id: "RES003"
      },
      {
        name: "TypeScript",
        avatar: "https://img.xiaozhangya.xin/file/Logo/FL3XpMDh.png",
        description: "TypeScript是JavaScript的超集，添加了静态类型和其他功能。",
        url: "https://www.typescriptlang.org/docs/handbook/intro.html",
        category: "文档",
        id: "RES004"
      }
    ]
  }
];


---      
      
<BaseLayout 
  title="导航"
  description="开发工具、服务平台、娱乐资源、学习资料等链接汇总">
  <Card infoIcon="feather:compass">      
    <div class="space-y-10 -mt-4 p-6">      
      <!-- 顶部搜索区域 -->
      <div class="relative max-w-2xl mx-auto mt-5">
        <div class="relative group">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <Icon name="feather:search" class="h-5 w-5 text-base-content/40 group-focus-within:text-primary transition-colors" />
          </div>
          <input
            type="text"
            id="search-input"
            class="block w-full pl-11 pr-4 py-4 bg-base-100 border-2 border-base-content/20 rounded-2xl text-base-content placeholder-base-content/40 focus:bg-base-100 shadow-sm transition-all duration-300"
            placeholder="搜索资源..."
          />
        </div>
      </div>

      <!-- 分类标签栏 -->
      <div class="flex flex-wrap justify-center gap-3" id="category-filters">
        <button
          class="category-btn active px-6 py-2 rounded-full text-sm font-bold transition-all duration-300 bg-primary text-primary-content border-2 border-primary shadow-md hover:shadow-lg hover:-translate-y-0.5"
          data-category="all"
        >
          全部
        </button>
        {navData.map((category) => (
          <button
            class="category-btn px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 bg-base-100 text-base-content/60 border-2 border-base-content/20 hover:bg-base-200 hover:text-primary hover:border-primary hover:shadow-md hover:-translate-y-0.5"
            data-category={category.id}
          >
            {category.title}
          </button>
        ))}
      </div>

      <!-- 资源内容区域 -->
      <div id="resources-content" class="space-y-10">
        {navData.map((category) => (
          <section id={category.id} class="space-y-6">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">      
              <Icon name={category.icon} class="w-6 h-6 text-primary" />      
              <span>{category.title}</span>      
            </h2>      
                    
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">      
              {category.items.map((item) => (
                <div 
                  class="resource-item"
                  data-category={category.id}
                  data-name={item.name.toLowerCase()}
                  data-desc={item.description.toLowerCase()}
                >
                  <NavigationCard {...item} />
                </div>
              ))}
            </div>      
          </section>
        ))}
      </div>

      <!-- 无结果提示 -->
      <div id="no-results" class="hidden text-center py-20">
        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-base-200 mb-4">
          <Icon name="feather:alert-circle" class="w-8 h-8 text-gray-400" />
        </div>
        <h3 class="text-lg font-medium text-gray-900 dark:text-white">未找到相关资源</h3>
        <p class="mt-2 text-gray-500 dark:text-gray-400">请尝试更换关键词或分类</p>
      </div>

      <div class="divider my-8">
        <Icon name="feather:heart" class="w-10 h-10 text-primary" />
      </div>
    </div>      
  </Card>      
</BaseLayout>

<script is:inline>
  document.addEventListener('astro:page-load', () => {
    const searchInput = document.getElementById('search-input');
    const categoryBtns = document.querySelectorAll('.category-btn');
    const resourceItems = document.querySelectorAll('.resource-item');
    const sections = document.querySelectorAll('#resources-content > section');
    const noResults = document.getElementById('no-results');
    
    let currentCategory = 'all';
    let currentSearch = '';

    function updateVisibility() {
      let visibleCount = 0;
      
      // 先处理所有资源项
      resourceItems.forEach(item => {
        const name = item.dataset.name;
        const desc = item.dataset.desc;
        const category = item.dataset.category;
        
        const matchesSearch = name.includes(currentSearch) || desc.includes(currentSearch);
        const matchesCategory = currentCategory === 'all' || category === currentCategory;

        if (matchesSearch && matchesCategory) {
          item.style.display = '';
          visibleCount++;
        } else {
          item.style.display = 'none';
        }
      });

      // 处理每个分类的section
      sections.forEach(section => {
        const sectionId = section.id;
        const sectionItems = section.querySelectorAll('.resource-item');
        const hasVisibleItems = Array.from(sectionItems).some(item => item.style.display !== 'none');
        
        if (currentCategory === 'all' || sectionId === currentCategory) {
          section.style.display = hasVisibleItems ? '' : 'none';
        } else {
          section.style.display = 'none';
        }
      });

      // 处理无结果提示
      if (noResults) {
        noResults.style.display = visibleCount === 0 ? 'block' : 'none';
      }
    }

    // 搜索事件
    searchInput?.addEventListener('input', (e) => {
      currentSearch = e.target.value.toLowerCase();
      updateVisibility();
    });

    // 分类点击事件
    categoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // 更新按钮状态
        categoryBtns.forEach(b => {
          b.classList.remove('bg-primary', 'text-primary-content', 'font-bold');
          b.classList.add('bg-base-100', 'text-base-content/60', 'font-medium');
        });
        btn.classList.remove('bg-base-100', 'text-base-content/60', 'font-medium');
        btn.classList.add('bg-primary', 'text-primary-content', 'font-bold');

        currentCategory = btn.dataset.category;
        updateVisibility();
      });
    });
  });
</script>