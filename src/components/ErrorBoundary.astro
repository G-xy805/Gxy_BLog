---
interface Props {
	fallback?: string;
}

const { fallback = "error" } = Astro.props;
---

<script>
  window.addEventListener('error', function(event) {
    const errorContainer = document.getElementById('error-boundary');
    if (errorContainer) {
      const message = event.message || '发生了意外错误';
      const errorHtml = '<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center"><h3 class="text-lg font-semibold text-red-800 dark:text-red-200 mb-2">JavaScript 错误</h3><p class="text-red-600 dark:text-red-300 mb-4">' + message + '</p><button onclick="window.location.reload()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">重试</button></div>';
      errorContainer.innerHTML = errorHtml;
    }
  });
</script>

<div id="error-boundary">
  <slot />
</div>
