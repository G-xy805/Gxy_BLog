---
import { Icon } from "astro-icon/components";
import ImageWrapper from "@/components/misc/ImageWrapper.astro";
import { profileConfig } from "@/config/profileConfig";
import { url } from "@/utils/url-utils";
---

<div class="card-base p-3">
  <a
    aria-label="Go to About Page"
    href={url("/about/")}
    class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"
  >
    <div
      class="absolute transition pointer-events-none group-hover:bg-black/30 group-active:bg-black/50
        w-full h-full z-50 flex items-center justify-center"
    >
      <Icon
        name="feather:user"
        class="transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100 text-white text-5xl"
      />
    </div>
    <ImageWrapper
      src={profileConfig.avatar || ""}
      alt="Profile Image of the Author"
      class="mx-auto lg:w-full h-full lg:mt-0"
      showFilter={false}
    />
  </a>
  <div class="px-2">
    <div
      class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition"
    >
      {profileConfig.name}
    </div>
    <div
      class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"
    >
    </div>
    <div class="text-center mb-2.5 transition font-bold tracking-wide bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent hover:scale-105 hover:from-purple-400 hover:to-pink-400">
      {profileConfig.bio}
    </div>
    <div class="mt-4 pt-3 border-t border-neutral-300 dark:border-neutral-600">
      <div class="grid grid-cols-4 gap-2 justify-items-center">
        {
          profileConfig.links.map((item) => {
            // 判断是否为站内链接
            const isInternal = item.url.startsWith('/');
            return (
              <div class="relative group">
                <a
                  rel={isInternal ? undefined : "me"}
                  aria-label={item.name}
                  href={item.url}
                  target={isInternal ? undefined : "_blank"}
                  class="bg-transparent w-10 h-10 flex items-center justify-center rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors"
                >
                  <Icon name={item.icon} class="text-xl text-neutral-600 dark:text-white hover:text-neutral-900 dark:hover:text-white transition-colors" />
                </a>
                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1 px-2 py-0.5 text-xs text-white dark:text-black bg-neutral-700 dark:bg-neutral-300 rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                  {item.name}
                </span>
              </div>
            );
          })
        }
      </div>
    </div>
  </div>
</div>
